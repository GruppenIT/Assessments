root@templateubuntu:/home/suporte# cd /var/www/assessment
sudo bash -c "source venv/bin/activate && python debug_environment.py"
============================================================
ğŸ” DEBUG COMPLETO DE ENVIRONMENT
============================================================
ğŸ“… 2025-07-22 13:31:48
ğŸ” Verificando variÃ¡veis de ambiente em diferentes contextos...

1. VariÃ¡veis do processo Python atual:
   âœ— DATABASE_URL=None
   âœ— SESSION_SECRET=None
   âœ— FLASK_SECRET_KEY=None

2. ConteÃºdo do arquivo .env:
   ğŸ“„ Tamanho: 574 bytes
   ğŸ“ FLASK_SECRET_KEY=***
   ğŸ“ DATABASE_URL=postgresql:***@localhost/assessment_db
   ğŸ“ SESSION_SECRET=***

3. SimulaÃ§Ã£o da configuraÃ§Ã£o Flask:
   ğŸ”— DATABASE_URL do environment: sqlite:///assessment.db
   ğŸ“ DiretÃ³rio atual: /var/www/assessment

5. Teste Flask apÃ³s carregamento manual:

4. Carregamento manual do .env:
   ğŸ“ DATABASE_URL do .env: postgresql:***@localhost/assessment_db
   âœ“ DATABASE_URL aplicada no environment
INFO:root:Blueprint de projetos registrado com sucesso
INFO:root:Blueprint de assessments registrado com sucesso
INFO:root:Blueprint de parÃ¢metros registrado com sucesso
INFO:root:Portal do cliente registrado com sucesso
INFO:root:UsuÃ¡rio admin padrÃ£o criado: admin@sistema.com / admin123
INFO:root:Tipo de assessment padrÃ£o 'CiberseguranÃ§a' criado
INFO:root:ConfiguraÃ§Ãµes padrÃ£o inicializadas
INFO:root:ConfiguraÃ§Ãµes padrÃ£o inicializadas
INFO:root:Blueprint de projetos registrado com sucesso
INFO:root:Blueprint de assessments registrado com sucesso
INFO:root:Blueprint de parÃ¢metros registrado com sucesso
INFO:root:Portal do cliente registrado com sucesso
INFO:root:ConfiguraÃ§Ãµes padrÃ£o inicializadas
   ğŸ”— Flask DATABASE_URI: postgresql://assessment_user:P%40ssw0rd%40.!@localhost/assessment_db
   âœ… Flask agora configurado para PostgreSQL!
   âœ… PostgreSQL conectado: PostgreSQL 16.9 (Ubuntu 16.9-0ubuntu0.24.04.1) on ...

============================================================
âœ… PROBLEMA RESOLVIDO COM CARREGAMENTO MANUAL!
ğŸ“ PrÃ³ximo passo: aplicar correÃ§Ã£o permanente
============================================================
root@templateubuntu:/var/www/assessment# cd /var/www/assessment
sudo python apply_env_permanently.py
sudo: python: command not found
root@templateubuntu:/var/www/assessment# sudo bash -c "source venv/bin/activate && python apply_env_permanently.py"
============================================================
ğŸ”§ APLICAÃ‡ÃƒO PERMANENTE DO .ENV
============================================================
ğŸ“… 2025-07-22 13:32:13

âœ“ MÃ³dulo env_loader.py criado
ğŸ’¾ Backup: main.py.backup.20250722_133213
âœ“ main.py modificado para carregar .env
ğŸ’¾ Backup: app.py.backup.20250722_133213
âœ“ app.py modificado para carregar .env

ğŸ§ª Testando aplicaÃ§Ã£o modificada...
   âœ— Erro no teste: unterminated string literal (detected at line 22) (env_loader.py, line 22)
âš ï¸  Teste local com problemas

ğŸ”„ Reiniciando supervisor...
assessment: stopped
assessment: ERROR (spawn error)
   âš ï¸  CÃ³digo de saÃ­da: 1792

============================================================
âœ… CORREÃ‡ÃƒO PERMANENTE APLICADA
ğŸ“ Agora a aplicaÃ§Ã£o sempre carregarÃ¡ o .env automaticamente
ğŸ”„ Aguarde alguns segundos e teste novamente
============================================================
root@templateubuntu:/var/www/assessment#